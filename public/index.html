<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>DSQ Host - Tabs</title>
<meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval'">
<style>
  :root { --bar:#222; --bar-active:#444; --bg:#f6f6f6; }
  body { margin:0; font-family: Arial, Helvetica, sans-serif; background:var(--bg); height:100vh; overflow:hidden; }
  .topbar { display:flex; gap:0; height:44px; background:var(--bar); color:#fff; align-items:center; }
  .tab { padding:10px 18px; cursor:pointer; user-select:none; font-size:13px; flex:0 0 auto; }
  .tab:hover { background:#333; }
  .tab.active { background:var(--bar-active); font-weight:600; }
  .spacer { flex:1 1 auto; }
  .controls { padding-right:10px; display:flex; gap:8px; align-items:center; }
  button { font-size:12px; padding:6px 8px; cursor:pointer; border-radius:4px; border:none; }
  .views { width:100%; height:calc(100vh - 44px); position:relative; }
  webview { position:absolute; left:0; top:0; width:100%; height:100%; border:none; display:none; }
  webview.visible { display:block; }
</style>
</head>
<body>

  <div class="topbar">
    <div class="tab active" data-view="mobility">Mobility Submission</div>
    <div class="tab" data-view="fixed">Fixed Submission</div>
    <div class="tab" data-view="others">Others</div>
    <div class="spacer"></div>
    <div class="controls">
      <button id="reloadBtn" title="Reload current view">Reload</button>
      <button id="openDevBtn" title="Open DevTools for current view">DevTools</button>
    </div>
  </div>

  <div class="views">
    <!-- load your renamed page here -->
    <webview id="view-mobility" class="visible" src="index Msub.html" nodeintegration allowpopups></webview>

    <!-- placeholders for other tabs (replace src with your pages later) -->
    <webview id="view-fixed" src="fixed.html" nodeintegration allowpopups></webview>
    <webview id="view-others" src="others.html" nodeintegration allowpopups></webview>
  </div>

<script>
  // Tab switching
  const tabs = document.querySelectorAll('.tab');
  const views = {
    mobility: document.getElementById('view-mobility'),
    fixed: document.getElementById('view-fixed'),
    others: document.getElementById('view-others')
  };

  function showView(name){
    // visually switch tabs
    tabs.forEach(t => t.classList.toggle('active', t.dataset.view === name));
    // show/hide webview elements
    Object.keys(views).forEach(k => {
      const el = views[k];
      if(!el) return;
      if(k === name) {
        el.classList.add('visible');
        // focus active webview so keyboard works inside it
        try { el.focus(); } catch(e) {}
      } else {
        el.classList.remove('visible');
      }
    });
  }

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      showView(tab.dataset.view);
    });
  });

  // Reload & DevTools controls (works per-webview)
  const reloadBtn = document.getElementById('reloadBtn');
  const openDevBtn = document.getElementById('openDevBtn');

  function activeWebview(){
    return document.querySelector('webview.visible');
  }

  reloadBtn.addEventListener('click', () => {
    const v = activeWebview();
    if(v) v.reload();
  });

  openDevBtn.addEventListener('click', () => {
    const v = activeWebview();
    if(!v) return;
    try {
      // open devtools for the webview's guest page
      v.openDevTools();
    } catch (e) {
      console.warn('openDevTools failed:', e);
    }
  });

  // Example: forward an event from webview to host (if needed)
  const mob = views.mobility;
  mob.addEventListener('dom-ready', () => {
    // optional: automatically open devtools for debugging
    // mob.openDevTools();

    // Example: allow webview to receive messages from host:
    // mob.send('host-ready', { now: Date.now() });
  });

  // Keep initial view visible (already set to mobility)
  showView('mobility');

  // If you'd like to lazy-load the heavy view content only when clicked:
  // replace webview.src with data-src and set src when tab is first shown.
</script>

</body>
</html>
